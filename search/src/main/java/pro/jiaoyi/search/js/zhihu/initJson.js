
var qids = ["29505844","597471035","485304763","38402789","490570243","64067977","599381554","548705349","387105459","312287727","561351975","561846188","533693145","383976738","520689677","371425012","364462364","376084838","582925109","439262156","499253466","462780935","61996091","582114914","393778037","392170770","440937301","490198891","475090510","47983525","40550925","67011958","397537021","524786238","549566981","581705713","52232746","549052757","533251382","421517466","349498420","599169771","48085305","522986327","347484560","415593721","354359715","443062080","374051271","378827938","395150651","586029208","330696775","322526199","446552215","61439015","571826185","58106129","305200873","488302437","559269707","348455675","361346545","510464497","275225338","509351753","533000993","503155934","559757313","23455508","486329345","504561543","352740230","283483399","363713005","571821424","20031148","513116085","517501343","372499465","318232810","444814621","46875346","425637303","529239359","519923200","589713791","381435437","278054044","442083631","381224051","574450127","541452019","431917448","492860482","423635382","296184779","434030122","384461232","290271717","565564912","420885749","482530569","454353023","529220777","414743452","550479836","320520914","446999607","22007235","526966505","21337168","526783593","378163166","38729355","589521674","332524152","64050037","436584024","537356684","597255275","385733534","488686194","493724201","592898206","31587895","20529275","277572623","460430669","438860473","323051953","607128435","445342261","457316757","445894884","384257581","431749288","549883421","495986548","465451204","572771690","459772633","21517223","328645699","510501979","613206234","22374371","29158247","527777508","427909698","424243974","19903686","52278720","343667650","442646466","543060290","448173972","64806282","373778160","424476693","577117311","292879632","388010072","391272512","34826522","476603882","392412428","436022949","305698898","387993257","429903868","457962712","270732390","352790799","29977752","442757206","430723962","405626257","439976034","34300299","486344345","468177828","587227544","327505019","284743936","588835435","485541533","335198974","594170070","63780214","549044808","567197299","571220407","396349835","493767041","446227428","263915991","434891849","375112548","542126957","386197872","448902665","511998329","436361772","422402285","423656743","478748050","515154863","19734526","450749148","526290333","312644323","446563636","319251938","421119146","381802764","440910749","586950716","593262192","265564851","454428425","30744052","469131759","24859805","525911741","450015555","569404395","22766802","424889982","455258266","516507528","264963003","378097272","409605467","512565757","377887338","339290384","482827415","54881268","340689110","385785994","504472951","20161178","62731342","300430204","397719927","30771491","449660481","333807930","387834590","601033284","517056284","486647857","399338894","49309265","404575577","525748542","418136872","453674063","375830880","24751611","340135695","33774281","553411139","286877524","376776665","21265767","404866711","30082392","331352862","20678547","20615865","536041706","334007397","40443733","317553146","582171555","481169347","359141693","412524633","500880341","436714368","444479137","388459026","452479366","522513224","359206598","432674969","524852760","496711176","310217412","383650919","48308074","297791458","434001469","21291092","299559650","445225911","501388521","390399437","529217778","25674210","507069303","429926198","20738115","526025166","493048179","386913399","446973385","363714770","513198934","26733948","388409065","574515367","267295102","380114612","39797558","48989431","486574175","19750395","52848890","457255323","573329643","576657169","20580669","545971568","450098532","514204738","274156076","374665629","21935550","392684873","561075498","436928239","506687650","505953735","443288454","590473893","50114273","587981872","383048850","435487238","530738035","578141375","364683232","386553632","482292461","507228562","534857406","430978805","459222451","370902861","490662544","443576860","533534956","352543423","478074002","424149889","488144204","53301284","597723922","472688129","31180796","376936099","604706585","403853386","607811770","390831158","450595133","23196607","25431999","277298626","272125979","471864815","310327671","532931862","293445483","549868946","491929480","432789225","545253444","368082383","302958320","587984801","456182249","567508745","21464851","307946493","21582386","26726794","382966656","512368159","54421863","491155503","385735267","314774696","490050747","518321296","383525228","442390543","471503034","455751864","275436558","435797305","280360756","549064119","551422878","483244991","295227280","364240542","372563990","517506187","271000574","495634920","427096609","308399998","454599268","272597275","391497104","275604234","569432486","330549876","443513025","378488044","466712290","576939986","317158941","413703736","341468483","20288037","567322557","55630624","569944962","381714210","65765379","36885006","489894075","372821731","390958002","59522318","31332694","525960738","575743686","525563062","21737616","610182197","21359049","598893038","368571341","326543546","584161928","403506850","22658314","372447175","543155899","521637289","376348886","356083188","314077063","398070539","285317767","570160986","559714076","581000255","393775872","412394010","21125530","488584190","373891943","310462033","577642796","586398197","585509404","407411371","46898281","450726628","390712305","401638157","280793160","471330672","388239289","425949448","532351201","396318366","29477933","60189826","449988534","51675361","408706735","483151090","41496681","400136487","550337354","20806237","522824647","19958940","292085674","561807824","361039398","395686318","572834694","446347611","277733620","549393694","350649654","607626979","457967590","61507376","390471544","485049858","436541310","575633950","356863343","485947305","22241899","52079558","426933517","585077030","437094669","501919195","546206960","585922074","437319150","381550472","361805666","601377100","376576989","512096530","425436022","526268731","587475945","266148934","492153358","552705491","491042042","364561675","68540205","587820301","270814876","369464686","590790831","27602525","437034025","23796371","402525043","516395618","282389265","596390173","422748732","577485659","492967437","457566870","472965742","516727752","309941410","491878466","569265460","575932864","64290456","525018487","460757331","29345319","547210852","431822985","501829592","457453818","472363417","420841221","519960306","22576286","432040527","419478768","553818105","356839399","523178629","492984003","392845690","56886127","289866222","445629034","511130602","504694635","490524891","485536454","364006393","321734671","345412348","598743648","445553781","388932735","31322832","325243492","317852856","57686220","577848807","23005366","550899135","384289435","568994328","26477444","381067714","417197742","490872981","299040387","337459944","310517171","520034661","41993466","591499883","24454750","472371358","435398366","465462445","37253515","404490776","510119577","552056390","512455879","339790746","66223139","424739683","460476675","26293877","399356266","489970908","20708147","410521968","452984590","360280529","299364122","29930842","302539079","295423068","23550211","589817435","559790567","370022523","508494185","434592213","566985505","30332677","479099109","31450837","350941801","330808366","518995710","590905596","518841255","587581023","390252381","54912820","590153503","554239950","442355017","25073488","25525666","451513484","586930387","540165623","22269525","443474830","452750595","387467341","443091512","561237180","515532197","342072355","452759265","393504413","358074991","575452396","597656736","597472079","503463965","405392653","445217165","464496143","568459075","378037771","58195189","333879590","493370060","405463470","568050182","536250515","551458585","266649787","20235044","349337753","401646607","20883403","308788104","306399620","486404646","290676428","47419361","393321165","416142384","41639983","31940967","263447899","594653229","290602748","483171003","514785992","315941506","544583986","488846813","540452470","307668896","562322993","315009857","441919773","511266420","267140866","419608563","578841112","522356676","64493288","500846208","571651372","397188245","560846397","380185252","453045698","270540908","536645497","510055041","21929143","512365271","408115206","585107026","49105514","277771718","590053951","362078356","471568522","395862974","326857715","392356063","548481317","284105949","266847697","46955742","510684263","363721088","600588709","440805019","525904884","32229915","484771951","361696587","317231313","431144001","324595086","437650204","507549134","480375986","616758847","604521322","436367194","36658421","467421664","20337411","577922399","376322942","486850541","475853776","553421442","368810324","368619352","503469058","276933205","449271689","19969400","536133278","538325405","455478599","25101628","451912310","380188608","66903986","339493575","33637200","446245554","479084162","528542159","528759193","421460639","22128885","551737512","319867127","531923581","583965881","24394226","265155928","583963459","585825537","274310414","58331273","547363285","568909846","376310567","48487884","62352222","574285342","532953770","400934025","591844561","449376536","590252037","511508659","530486097","524891195","504798292","305835972","56342835","19718686","421418077","503982518","572033515","389127440","581155111","308041264","398806137","307789226","415315935","300577740","547703797","467277134","533943878","294497433","380389403","366087906","28358499","523433742","593606855","505384910","482042402","449799165","20099434","395965415","485498279","320428174","567330695","406402148","379468956","35029288","529291472","325000243","525219304","455620920","416212894","385975905","591208256","493331261","510645484","589126196","411540230","544899494","20791825","374602708","471363638","19792103","391125305","581655923","327781452","399902239","541500616","445807596","378208439","464592322","404575832","353241919","48438850","317835199","284714816","24467804","579096483","440946520","312827843","327447132","64787075","572120991","569749479","427364972","529121549","21518960","365918300","375998809","292299889","529622091","575817341","324950715","68372315","403747458","22242306","310437196","300401001","476510568","404833582","477431237","585164338","553061536","20380724","324592319","19566610","349413386","373746122","361111920","49880291","581633297","27142839","458720293","435440977","471098966","407001593","20801442","34563627","568161071","518784446","459338933","315192201","475196874","19632354","579997991","353320007","476658201","29633389","502314715","431964359","522113382","430084246","336381893","368185352","595060216","403017407","466198719","385345590","510441484","38749788","567774777","430923788","334008721","428415070","485081768","265230484","512194591","370205193","592193473","556125448","265927642","53576972","463878605","454931100","506034238","301862592","264714120","19744165","368357575","457972881","51824149","343945718","511856971","437497000","458016412","372076316","604986486","311335631","326869316","27662604","428660272","520435512","604838569","424820893","266666642","574487400","585238951","585267679","458500889","548488515","468760267","352859228","306573620","336943532","21804682","399916881","21711307","513337989","509683807","30371580","28033942","511844276","370105719","395690591","355210969","61597918","470105674","41951075","502884792"];
var index = 0;
function get(qid) {
    console.log("get "+qid +" start");
    var url = 'https://www.zhihu.com/question/' + qid;
    fetch(url)
        .then((response) => response.text())
        .then((text) => {
            var doc = initJSON(text);
            var data = doc.querySelector("#js-initialData");
            var j = JSON.parse(data.text);
            console.log(j);

            var initialState = j.initialState;
            var entities = initialState.entities;
            var questions = entities.questions[qid];
            var entity = {};
            entity.qid = questions.id;
            entity.title = questions.title;
            entity.created = questions.created;
            entity.updatedTime = questions.updatedTime;

            entity.answerCount = questions.answerCount;
            entity.visitCount = questions.visitCount;
            entity.commentCount = questions.commentCount;
            entity.followerCount = questions.followerCount;
            // console.log(entity);
            entity.answers = [];
            var answers = entities.answers;
            //根据key 遍历 js object
            Object.keys(answers).forEach(key => {
                var answer = answers[key];
                var an = {};
                an.name = answer.author.name;
                an.voteupCount = answer.voteupCount;
                an.createdTime = answer.createdTime;// "createdTime": 1558767139,
                an.updatedTime = answer.updatedTime;// "createdTime": 1558767139,
                // console.log(an);
                entity.answers.push(an);
            });

            console.log(entity);

            // 创建一个Blob对象
            let blob = new Blob([JSON.stringify(entity)], {type: "application/json"});

            // 生成下载链接
            let downloadLink = document.createElement("a");
            downloadLink.href = URL.createObjectURL(blob);
            downloadLink.download = qid + ".json";
            downloadLink.click();
        });

    console.log("get " + qid + " end");
}


function initJSON(str) {
    var parser = new DOMParser();
    var doc = parser.parseFromString(str, 'text/html');
    return doc;
}


setInterval(function () {
    if (index < qids.length) {
        console.log("index="+index)
        let qid = qids[index];
        get(qid);
        index++;
    }
}, 5 * 1000);